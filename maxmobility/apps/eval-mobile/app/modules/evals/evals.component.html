<ActionBar class="action-bar" flat="true" [title]="evalsTitle">
    <NavigationButton android:visibility="collapse" tap="onNavBtnTap"></NavigationButton>
    <ActionItem (tap)="onSearchTap()" ios.position="right">
        <Button class="" [text]="searchBtnText" class="action-item"></Button>
    </ActionItem>
</ActionBar>

<Gradient tkMainContent margin-top="30" direction="to bottom" colors="#004F7E, #0070b3">


    // Loading indicator - shown while data is being fetched
    <StackLayout *ngIf="!evalsLoaded" class="loader">
        <Label [text]="'evals.loading' | translate" class="h2" textWrap="true"></Label>
        <ActivityIndicator busy="true" width="26" height="26"></ActivityIndicator>
    </StackLayout>

    <StackLayout *ngIf="evalsLoaded && evals.length < 1" class="no-evals-container">
        <Label #noEvalsLabel [text]="'evals.no-evals-message' | translate" class="h2" textWrap="true"></Label>
    </StackLayout>

    // Evals ListView
    <ListView height="100%" backgroundColor="transparent" *ngIf="evalsLoaded" [items]="evals" (itemTap)="onEvalItemTap($event)"
        class="evals-list" separatorColor="#ddd">
        <ng-template nsTemplateKey="header" let-eval="item">

            <DockLayout stretchLastChild="true" height="100%">
                // want this to span the rows vertically, using height 100% isn't working
                <Label dock="left" height="100%" minHeight="100%" class="list-line" textWrap="true"></Label>

                <StackLayout dock="right" class="eval-block">

                    // Eval Data
                    <WrapLayout dock="right" orientation="horizontal">
                        <Label [text]="eval._kmd.ect | date: 'short'" class="eval-data" textWrap="true"></Label>
                        <Label [text]="eval.name ? 'Name: ' + eval.name : ''" [visibility]="eval.name ? 'visible' : 'collapsed'"
                            class="eval-data" textWrap="true"></Label>
                        <Label [text]="'Chair: ' + eval.chair" [visibility]="eval.chair ? 'visible' : 'collapsed'"
                            class="eval-data"></Label>
                    </WrapLayout>

                    // Trials for the Eval
                    <GridLayout rows="*, *, *, *, *, *, *" columns="*, *" class="list-group-item" *ngFor="let trial of eval.trials; index as i; count as c;">

                        <Label row="0" colSpan="2" class="trial-name" [text]="trial.name ? 'Trial Name: ' + trial.name : 'Trial Name: N/A'"
                            textWrap="true"></Label>

                        // General Info of the Trial
                        <Label row="1" col="0" [text]="trial.flat ? 'Flat: Yes' : 'Flat: No'" class="trial-data"></Label>
                        <Label row="1" col="1" [text]="trial.ramp ? 'Ramp: Yes' : 'Ramp: No'" class="trial-data"></Label>
                        <Label row="2" col="0" [text]="trial.inclines ? 'Inclines: Yes' : 'Inclines: No'" class="trial-data"></Label>
                        <Label row="2" col="1" [text]="trial.max_speed ? 'Max Speed: ' + trial.max_speed : 'Max Speed: N/A'"
                            class="trial-data"></Label>

                        // Without SmartDrive
                        <Label row="3" colSpan="2" [text]="'evals.without-smartdrive' | translate" class="trial-label"
                            textWrap="true"></Label>
                        <Label row="4" col="0" [text]="trial.without_pushes ? 'Pushes: ' + trial.without_pushes : 'Pushes: N/A'"
                            class="trial-data"></Label>
                        <Label row="4" col="1" [text]="trial.without_coast ? 'Coast: ' + trial.without_coast : 'Coast: N/A'"
                            class="trial-data"></Label>

                        // With SmartDrive
                        <Label row="5" colSpan="2" [text]="'evals.with-smartdrive' | translate" class="trial-label"
                            textWrap="true"></Label>
                        <Label row="6" col="0" [text]="trial.with_pushes ? 'Pushes: ' + trial.with_pushes : 'Pushes: N/A'"
                            class="trial-data"></Label>
                        <Label row="6" col="1" [text]="trial.with_coast ? 'Coast: ' + trial.with_coast : 'Coast: N/A'"
                            class="trial-data"></Label>
                    </GridLayout>

                    <GridLayout rows="40" columns="*, *, *">
                        <Button row="0" col="2" text="&#xf1ee;" class="mdi btn-transparent" verticalAlignment="middle"
                            fontSize="22" (tap)="onEmailBtnTap(eval)"></Button>
                    </GridLayout>

                </StackLayout>

            </DockLayout>

        </ng-template>
    </ListView>

</Gradient>