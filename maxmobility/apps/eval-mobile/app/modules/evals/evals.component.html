<ActionBar class="action-bar" flat="true" [title]="evals.length ? (evals.length) + ' ' + ('evals.title' | translate) : 'evals.title' | translate">
    <NavigationButton android:visibility="collapse" tap="onNavBtnTap"></NavigationButton>
    <ActionItem (tap)="onSearchTap()" ios.position="right">
        <Button class="" [text]="searchBtnText" class="action-item"></Button>
    </ActionItem>
</ActionBar>

<Gradient tkMainContent margin-top="30" direction="to bottom" colors="#004F7E, #0070b3">


    // Loading indicator - shown while data is being fetched
    <StackLayout *ngIf="!evalsLoaded" class="loader">
        <Label [text]="'evals.loading' | translate" class="h2" textWrap="true"></Label>
        <ActivityIndicator busy="true" width="26" height="26"></ActivityIndicator>
    </StackLayout>

    <StackLayout *ngIf="evalsLoaded && evals.length < 1" class="no-evals-container">
        <Label #noEvalsLabel [text]="'evals.no-evals-message' | translate" class="h2" textWrap="true"></Label>
    </StackLayout>

    // Evals ListView
    <ListView height="100%" backgroundColor="transparent" *ngIf="evalsLoaded" [items]="evals" (itemTap)="onEvalItemTap($event)"
       (itemLoading)="onItemLoading($event)"  class="evals-list" separatorColor="#ddd">
        <ng-template nsTemplateKey="header" let-eval="item">

            <DockLayout>
                // want this to span the rows vertically, using height 100% isn't working
                <Label dock="left" height="95%" minHeight="95%" class="list-line" textWrap="true"></Label>

                <StackLayout dock="right" class="eval-block">

                    // Eval Data
                    <WrapLayout dock="right" orientation="horizontal">
                        <Label [text]="eval._kmd.ect | date: 'short'" class="eval-data" textWrap="true"></Label>
                        <Label [text]="('eval-entry.chair-label' | translate) + ': ' + eval.chair" [visibility]="eval.chair ? 'visible' : 'collapsed'"
                            class="eval-data"></Label>
                    </WrapLayout>

                    // Trials for the Eval
                    <GridLayout rows="*, *, *, *, *, *, *" columns="*, *" class="list-group-item" *ngFor="let trial of eval.trials; index as i; count as c;">

                        <Label row="0" colSpan="2" class="trial-name" [text]="('trial.title' | translate) + ': ' + (trial.name || (i+1) )" textWrap="true"></Label>

                        // General Info of the Trial
                        <Label row="1" col="0" [text]="('trial.flat-surfaces' | translate) + ': ' + ((trial.flat ? 'dialogs.yes' : 'dialogs.no') | translate)" class="trial-data"></Label>
                        <Label row="1" col="1" [text]="('trial.ramp-incline' | translate) + ': ' + ((trial.rampIncline ? 'dialogs.yes' : 'dialogs.no') | translate)" class="trial-data"></Label>
                        <Label row="2" col="0" [text]="('trial.distance' | translate) + (trial.distance || '0')" class="trial-data"></Label>
                        <Label row="2" col="1" [text]="('trial.max-speed' | translate) + ': ' + (trial.max_speed || 0)" class="trial-data"></Label>

                        // Without SmartDrive
                        <Label row="3" colSpan="2" [text]="'evals.without-smartdrive' | translate" class="trial-label" textWrap="true"></Label>

                        <Label row="4" col="0" [text]="('trial.pushes' | translate) + (trial.without_pushes || '0')" class="trial-data"></Label>
                        <Label row="4" col="1" [text]="('trial.time' | translate) + timeString(trial.without_elapsed)" class="trial-data"></Label>


                        // With SmartDrive
                        <Label row="5" colSpan="2" [text]="'evals.with-smartdrive' | translate" class="trial-label"
                            textWrap="true"></Label>
                        <Label row="6" col="0" [text]="('trial.pushes' | translate) + (trial.with_pushes || '0')" class="trial-data"></Label>
                        <Label row="6" col="1" [text]="('trial.time' | translate) + timeString(trial.with_elapsed)" class="trial-data"></Label>

                    </GridLayout>

                    <GridLayout rows="40" columns="*, *, *">
                        <Button row="0" col="2" text="&#xf1ee;" class="mdi btn-transparent" verticalAlignment="middle"
                            fontSize="22" (tap)="onEmailBtnTap(eval)"></Button>
                    </GridLayout>

                </StackLayout>

            </DockLayout>

        </ng-template>
    </ListView>

</Gradient>
