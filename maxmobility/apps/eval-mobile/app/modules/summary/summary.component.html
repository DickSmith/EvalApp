<ActionBar class="action-bar" flat="true" [title]="'menu.summary' | translate">
  <NavigationButton *ngIf="isIOS()"></NavigationButton>
</ActionBar>

<Gradient tkMainContent direction="to bottom" colors="#004F7E, #0070b3">
  <GridLayout rows="auto, *, auto" cols="*">

    <StackLayout class="topSlide" height="20%" width="100%">
      <Image src="~/assets/images/trial-summary.png" stretch="aspectFit"></Image>
    </StackLayout>

    <ScrollView row="1">
      <StackLayout class="lowerSlide" orientation="vertical" horizontalAlignment="center">

        // Heading
        <Label [text]="'menu.summary' | translate" class="slideLowerLabel" textWrap="true"></Label>

        // Stats and Questionaire
        <StackLayout class="trial-stack-layout">
          // summary of user performance
          <Label textWrap="true" class="summaryDescription">
            <FormattedString>
              <Span [text]="'summary.user-performed' | translate" color="#fff"></Span>
              <Span [text]="pushDiff.toFixed(0) + '% ' + pushComparison()" color="#43D551" fontAttributes="Bold"></Span>
              <Span [text]="'summary.pushes' | translate" color="#fff"></Span>
            </FormattedString>
          </Label>

          // speed
          <Label textWrap="true" class="summaryDescription">
            <FormattedString>
              <Span [text]="'summary.average-speed' | translate" color="#fff"></Span>
              <Span [text]="speedDiff.toFixed(1)+' x ' + speedComparison()" color="#43D551"
                fontAttributes="Bold"></Span>
              <Span [text]="'summary.with-sd' | translate" color="#fff"></Span>
            </FormattedString>
          </Label>

		  <!--
          // cadence
          <Label textWrap="true" class="summaryDescription">
            <FormattedString>
              <Span [text]="'summary.at' | translate" color="#fff"></Span>
              <Span [text]="totalCadenceWithout.toFixed(1)" color="#FF671F" fontAttributes="Bold"></Span>
              <Span [text]="'summary.cadence' | translate" color="#fff"></Span>
            </FormattedString>
          </Label>
		  -->

          // difficulties
          <StackLayout *ngFor="let diff of difficulties">
            <StackLayout *ngIf="diff.show">
              <DockLayout stretchLastChild="false">
                <Label [text]="diff.labelText | translate" class="trial-item" dock="left" textWrap="true" width="70%"></Label>
                <Switch (checkedChange)="onDifficultyChecked(diff,$event)" [checked]="diff.has" dock="right"></Switch>
              </DockLayout>
              <DockLayout *ngIf="diff.has" stretchLastChild="false">
                <Label [text]="diff.sliderLabelText | translate" dock="left" class="trial-slider-label"></Label>
                <Label verticalAlignment="center" dock="right" class="trial-slider-value" style="min-width: 50" [text]="evaluation[diff.key].toFixed(0) +'/10'"
                  row="0" col="1"></Label>
              </DockLayout>
              <GridLayout *ngIf="diff.has" rows="auto" columns="*, auto">
                <Slider maxValue="10" verticalAlignment="center" class="trial-slider" [value]="(evaluation[diff.key]).toFixed(0)"
                  (valueChange)="onSliderUpdate(diff.key, $event)" row="0" col="0"></Slider>
              </GridLayout>
              <DockLayout *ngIf="evalIsMax(diff.key, 10)" stretchLastChild="false">
                <Label [text]="diff.unableText | translate" class="trial-item" dock="left" textWrap="true" width="70%"></Label>
                <Switch (checkedChange)="onUnableChecked(diff,$event)" [checked]="diff.unable" dock="right"></Switch>
              </DockLayout>
            </StackLayout>
          </StackLayout>

        </StackLayout>

        <StackLayout orientation="horizontal" horizontalAlignment="center">
          <button [text]="'summary.add-trial' | translate" class="back-button" (tap)="onBack()"></button>
          <button [text]="'general.complete' | translate" class="start-button" (tap)="onComplete()"></button>
        </StackLayout>

      </StackLayout>
    </ScrollView>
  </GridLayout>
</Gradient>
