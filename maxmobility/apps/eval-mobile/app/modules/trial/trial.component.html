<ActionBar class="action-bar" flat="true" [title]="'trial.title' | translate">
  <NavigationButton *ngIf="isIOS()"></NavigationButton>
</ActionBar>

<Gradient tkMainContent direction="to bottom" colors="#004F7E, #0070b3">

  <Carousel ios:indicatorOffset="0,-10" indicatorColor="#66ccff" indicatorColorUnselected="#cceeff" height="100%">
    <CarouselItem  height="100%">
      <GridLayout  rows="auto, *" cols="*">
        <StackLayout backgroundImage="~/assets/images/background_1.jpg" row="0"  height="20%" width="100%" orientation="horizontal" horizontalAlignment="center">
          <Image src="~/assets/images/trial-setup.png" stretch="aspectFit"></Image>
        </StackLayout>

        //First Page: Configure Trial
        <ScrollView class="trial-scroll-view" row="1">
          <StackLayout orientation="vertical" horizontalAlignment="center">

            //Heading and description
            <Label [text]="'trial.set-up' | translate" class="slideLowerLabel" textWrap="true"></Label>
            <Label [text]="'trial.select-options' | translate" class="slideDescription" textWrap="true"></Label>

            //Trial Name
            <TextField [hint]="'trial.name' | translate"
		       autocorrect="false"
		       [text]="trial.name"
		       (textChange)="onTextChange('name', $event)"
		       class="trial-name-textfield"></TextField>

            //Trial options
            <StackLayout class="trial-stack-layout">
              <Label [text]="'trial.recommendation' | translate"
                     textWrap="true"
                     class="trial-recommendation"></Label>

              //Terrain Options
              <DockLayout stretchLastChild="false">
                <Label [text]="'trial.flat-surfaces' | translate" class="trial-item" dock="left"></Label>
                <Switch dock="right"
                class=""
                        [checked]="trial.flat"
                        (checkedChange)="onSwitchChecked('flat', $event)"></Switch>
              </DockLayout>
              <DockLayout stretchLastChild="false">
                <Label [text]="'trial.ramp' | translate" class="trial-item" dock="left"></Label>
                <Switch dock="right"
                        [checked]="trial.ramp"
                        (checkedChange)="onSwitchChecked('ramp', $event)"></Switch>
              </DockLayout>
              <DockLayout stretchLastChild="false">
                <Label [text]="'trial.inclines' | translate" class="trial-item" dock="left"></Label>
                <Switch dock="right"
                        [checked]="trial.inclines"
                        (checkedChange)="onSwitchChecked('inclines', $event)"></Switch>
              </DockLayout>
              <DockLayout stretchLastChild="false">
                <Label [text]="'trial.other' | translate" class="trial-item" dock="left"></Label>
                <Switch dock="right"
                        [checked]="trial.other"
                        (checkedChange)="onSwitchChecked('other', $event)"></Switch>               
              </DockLayout>
              <TextField [hint]="'trial.description' | translate"
                         *ngIf="trial.other"
		                 autocorrect="false"
		                 [text]="trial.other_description"
		                 (textChange)="onTextChange('other_description', $event)"
		                 class="trial-description-textfield"></TextField> 

              //SmartDrive Settings 
              //Acceleration
              <DockLayout stretchLastChild="false">
                <Label [text]="'trial.accelleration' | translate" class="trial-slider-label"></Label>
                <Label verticalAlignment="center" dock="right" class="trial-slider-value-label" style="min-width: 50" [text]="(trial.acceleration*100).toFixed(0)+'%'"
                       row="0" col="1"></Label>
              </DockLayout>
              <GridLayout rows="auto" columns="*, auto">
                <Slider minValue="0", maxValue="10" verticalAlignment="center" class="trial-slider" [value]="trial.acceleration * 10" (valueChange)="onSliderUpdate('acceleration', $event)"
			row="0" col="0"></Slider>
              </GridLayout>

              //Max Speed
              <DockLayout stretchLastChild="false">
                <Label [text]="'trial.max-speed' | translate" class="trial-slider-label"></Label>
                <Label verticalAlignment="center" dock="right" class="trial-slider-value-label" style="min-width: 50" [text]="(trial.max_speed*100).toFixed(0)+'%'"
                       row="0" col="1"></Label>
              </DockLayout>
              <GridLayout rows="auto" columns="*, auto">
                <Slider minValue="0", maxValue="10" verticalAlignment="center" class="trial-slider" [value]="trial.max_speed * 10" (valueChange)="onSliderUpdate('max_speed', $event)"
			row="0" col="0"></Slider>
              </GridLayout>

              <Button class="back-button" [text]="'general.back' | translate" (tap)="onBack()"></Button>

            </StackLayout>
          </StackLayout>
        </ScrollView>
      </GridLayout>
    </CarouselItem>

    //Page 2 Start Trial
    <CarouselItem #withPage height="100%">
      <GridLayout  rows="auto, *" cols="*">

         <StackLayout backgroundImage="~/assets/images/background_1.jpg" row="0"  height="20%" width="100%" orientation="horizontal" horizontalAlignment="center">
          <Image src="~/assets/images/trial-sd.png" stretch="aspectFit"></Image>
        </StackLayout>

        <ScrollView class="trial-scroll-view" row="1">
          <StackLayout orientation="vertical" horizontalAlignment="center">

            //Heading and description
            <Label [text]="'trial.phase-1' | translate" class="slideLowerLabel" textWrap="true"></Label>
            <Label [text]="'trial.with-sd' | translate" class="slideLowerLabel" textWrap="true"></Label>
            <Label [text]="'trial.phase-1-desc' | translate" class="slideDescription" textWrap="true"></Label>

            <StackLayout class="input-field">

              <button #startWith
		      row="2"
		      [text]="'trial.start' | translate"
		      class="start-button"
		      (tap)="onStartWithTrial($event)"></button>
              <button #stopWith
		      row="2"
		      [text]="'trial.stop' | translate"
		      class="start-button"
		      (tap)="onStopWithTrial($event)"></button>

              //Data Fields
              <GridLayout  rows="auto, auto" columns="auto, *, auto, *">
                <Label row="0" col="0" [text]="'trial.pushes' | translate" class="value-label-left" textWrap="true"></Label>
                <Label row="0" col="1" [text]="pushWithDisplay" class="value-left" textWrap="true"></Label>
                <Label row="0" col="2" [text]="'trial.coast-time' | translate" class="value-label-right" textWrap="true"></Label>
                <Label row="0" col="3" [text]="coastWithDisplay" class="value-right" textWrap="true"></Label>
              </GridLayout>
              
              <GridLayout  rows="auto, auto" columns="auto, *, auto, *">
                <Label row="0" col="0" [text]="'trial.time' | translate" class="value-label-left" textWrap="true"></Label>
                <Label row="0" col="1" [text]="timeWithDisplay" class="value-left" textWrap="true"></Label>
                <Label row="0" col="2" [text]="'trial.distance' | translate"class="value-label-right" textWrap="true"></Label>
                <Label row="0" col="3" [text]="distanceDisplay" class="value-right" textWrap="true"></Label>
              </GridLayout>
            </StackLayout>
          </StackLayout>
        </ScrollView>
      </GridLayout>
    </CarouselItem>
    
    //Page 3 Without SmartDrive
    <CarouselItem #withoutPage  height="100%">
      <GridLayout rows="auto, *" cols="*">
        <StackLayout backgroundImage="~/assets/images/background_1.jpg" row="0"  height="20%" width="100%" orientation="horizontal" horizontalAlignment="center">
          <Image src="~/assets/images/trial-no-sd.png" stretch="aspectFit"></Image>
        </StackLayout>

        <ScrollView class="trial-scroll-view" row="1">
          <StackLayout class=" lowerSlide" orientation="vertical" horizontalAlignment="center">

            //Heading and description
            <Label [text]="'trial.phase-2' | translate" class="slideLowerLabel" textWrap="true"></Label>
            <Label [text]="'trial.without-sd' | translate" class="slideLowerLabel" textWrap="true"></Label>
            <Label [text]="'trial.phase-2-desc' | translate" class="slideDescription" textWrap="true"></Label>

            <StackLayout class="input-field">

              <button #startWithout
		      row="2"
		      [text]="'trial.start' | translate"
		      class="start-button"
		      (tap)="onStartWithoutTrial($event)"></button>
              <button #stopWithout
		      row="2"
		      [text]="'trial.stop' | translate"
		      class="start-button"
		      (tap)="onStopWithoutTrial($event)"></button>

              //Data Fields
              <GridLayout  rows="auto, auto" columns="auto, *, auto, *">
                <Label row="0" col="0" [text]="'trial.pushes' | translate" class="value-label-left" textWrap="true"></Label>
                <Label row="0" col="1" [text]="pushWithoutDisplay" class="value-left" textWrap="true"></Label>
                <Label row="0" col="2" [text]="'trial.coast-time' | translate" class="value-label-right" textWrap="true"></Label>
                <Label row="0" col="3" [text]="coastWithoutDisplay" class="value-right" textWrap="true"></Label>
              </GridLayout>
              
              <GridLayout  rows="auto, auto" columns="auto, *, auto, *">
                <Label row="0" col="0" [text]="'trial.time' | translate"  class="value-label-left" textWrap="true"></Label>
                <Label row="0" col="1" [text]="timeWithoutDisplay" class="value-left" textWrap="true"></Label>
                <Label row="0" col="2" [text]="'trial.distance' | translate" class="value-label-right" textWrap="true"></Label>
                <Label row="0" col="3" [text]="distanceDisplay" class="value-right" textWrap="true"></Label>
              </GridLayout>
            </StackLayout>
          </StackLayout>
        </ScrollView>
      </GridLayout>
    </CarouselItem>

    //Page 4 Trial Complete
    <CarouselItem  height="100%">
      <GridLayout rows="auto, *" cols="*">
        <StackLayout backgroundImage="~/assets/images/background_1.jpg" row="0"  height="20%" width="100%" orientation="horizontal" horizontalAlignment="center">
          <Image src="~/assets/images/trial-complete.png" stretch="aspectFit"></Image>
        </StackLayout>

        <ScrollView class=" trial-scroll-view" row="1">
          <StackLayout class=" lowerSlide" orientation="vertical" horizontalAlignment="center">

            //Heading and description
            <Label [text]="'trial.complete' | translate"  class="slideLowerLabel" textWrap="true" ></Label>


            <StackLayout>

              //Data Fields with SmartDrive
              <Label [text]="'trial.with-sd' | translate"  class="sub-heading" textWrap="true" margin="30,0,0,15"></Label>
              <GridLayout  rows="auto, auto" columns="auto, *, auto, *">
                <Label row="0" col="0" [text]="'trial.pushes' | translate"  class="value-label-left" textWrap="true"></Label>
                <Label row="0" col="1" [text]="pushWithDisplay" class="value-left" textWrap="true"></Label>
                <Label row="0" col="2" [text]="'trial.coast-time' | translate" class="value-label-right" textWrap="true"></Label>
                <Label row="0" col="3" [text]="coastWithDisplay" class="value-right" textWrap="true"></Label>
              </GridLayout>
              
              <GridLayout  rows="auto, auto" columns="auto, *, auto, *">
                <Label row="0" col="0" [text]="'trial.time' | translate"  class="value-label-left" textWrap="true"></Label>
                <Label row="0" col="1" [text]="timeWithDisplay" class="value-left" textWrap="true"></Label>
                <Label row="0" col="2" [text]="'trial.distance' | translate"  class="value-label-right" textWrap="true"></Label>
                <Label row="0" col="3" [text]="distanceDisplay" class="value-right" textWrap="true"></Label>
              </GridLayout>

              //Data Fields without SmartDrive
              <Label [text]="'trial.without-sd' | translate"  class="sub-heading" textWrap="true" margin="30,0,0,15"></Label>
              <GridLayout  rows="auto, auto" columns="auto, *, auto, *">
                <Label row="0" col="0" [text]="'trial.pushes' | translate"  class="value-label-left" textWrap="true"></Label>
                <Label row="0" col="1" [text]="pushWithoutDisplay" class="value-left" textWrap="true"></Label>
                <Label row="0" col="2" [text]="'trial.coast-time' | translate"  class="value-label-right" textWrap="true"></Label>
                <Label row="0" col="3" [text]="coastWithoutDisplay" class="value-right" textWrap="true"></Label>
              </GridLayout>
              
              <GridLayout  rows="auto, auto" columns="auto, *, auto, *">
                <Label row="0" col="0" [text]="'trial.time' | translate"  class="value-label-left" textWrap="true"></Label>
                <Label row="0" col="1" [text]="timeWithoutDisplay" class="value-left" textWrap="true"></Label>
                <Label row="0" col="2" [text]="'trial.distance' | translate" class="value-label-right" textWrap="true"></Label>
                <Label row="0" col="3" [text]="distanceDisplay" class="value-right" textWrap="true"></Label>
              </GridLayout>

              <button row="2"  [text]="'trial.summary' | translate"  class="start-button" (tap)="onNext()"></button>
            </StackLayout>
          </StackLayout>
        </ScrollView>

      </GridLayout>
    </CarouselItem>

  </Carousel>
</Gradient>
