<ActionBar class="action-bar" flat="true" [title]="'menu.home' | translate">
  <NavigationButton ios:visibility="collapsed" icon="res://menu" (tap)="onDrawerButtonTap()"></NavigationButton>
  <ActionItem icon="res://navigation/menu" android:visibility="collapsed" (tap)="onDrawerButtonTap()" ios.position="left"></ActionItem>
</ActionBar>

<StackLayout tkMainContent>
  <ScrollView class="main-scroll-view">
    <GridLayout rows="auto, auto, auto, auto, auto, auto" columns="*">

      //Connectivity
      <GridLayout rows="auto, auto, *" columns="*, auto" class="list-grid-layout" row="0">
        <Label row="0" col="0" [text]="'menu.connectivity' | translate" class="list-heading" (tap)="chevronButtonTapped('/pairing')"></Label>
        <Label row="0" col="1" horizontalAlignment="right" text="&#xf142;" class="mdi chev" (tap)="chevronButtonTapped('/pairing')"></Label>
        <Label row="1" [text]="'menu.con-desc' | translate" class="list-description" textWrap="true"></Label>

        <RadListView row="2" colSpan="2" ios:height="210" [items]="connectivityItems">
          <ng-template tkListItemTemplate let-item="item">
            <GridLayout rows="140, auto" class="list-item-layout">
              <Image row="0" [src]="item.Image" (tap)="connectivityThumbTapped(item)" stretch="aspectFill"></Image>
              <Label row="1" [text]="item.Description | translate" textWrap="true"></Label>
            </GridLayout>
          </ng-template>
          <ListViewLinearLayout tkListViewLayout dynamicItemSize="false" ios:itemHeight="210" ios:itemWidth="160"
            scrollDirection="Horizontal"></ListViewLinearLayout>
        </RadListView>

      </GridLayout>

      // Videos
      <GridLayout rows="auto, auto, auto, *" columns="*, auto" class="list-grid-layout" row="2">
        <Label row="0" colSpan="2" class="hr-light m-10" backgroundColor="#FF671F" width="92.5%"></Label>
        <Label row="1" col="0" [text]="'menu.videos-title' | translate" class="list-heading" (tap)="chevronButtonTapped('/videos')"></Label>
        <Label row="1" col="1" horizontalAlignment="right" text="&#xf142;" class="mdi chev" (tap)="chevronButtonTapped('/videos')"></Label>
        <Label row="2" colSpan="2" [text]="'menu.videos-description' | translate" class="list-description" textWrap="true"></Label>

        <RadListView row="3" colSpan="2" ios:height="160" [items]="videoItems">
          <ng-template tkListItemTemplate let-item="item">
            <GridLayout rows="auto, auto" columns="*" class="video-layout">
              <GridLayout row="0" class="video-title" (tap)="videoThumbTapped(item)">
                <Label textWrap="true" [text]="item.Title"></Label>
              </GridLayout>
            </GridLayout>
          </ng-template>
          <ListViewLinearLayout tkListViewLayout dynamicItemSize="false" ios:itemHeight="160" ios:itemWidth="160"
            scrollDirection="Horizontal"></ListViewLinearLayout>
        </RadListView>
      </GridLayout>

      // Evaluation-Clinical Tools
      <GridLayout rows="auto, auto, auto, *" columns="*, auto" class="list-grid-layout" row="3">
        <Label row="0" colSpan="2" class="hr-light m-10" backgroundColor="#FF671F" width="92.5%"></Label>
        <Label row="1" col="0" [text]="'menu.clinical-tools' | translate" class="list-heading" (tap)="chevronButtonTapped('/eval-entry')"></Label>
        <Label row="1" col="1" horizontalAlignment="right" text="&#xf142;" class="mdi chev" (tap)="chevronButtonTapped('/eval-entry')"></Label>
        <Label row="2" colSpan="2" [text]="'menu.clinical-tools-desc' | translate" class="list-description" textWrap="true"></Label>

        <RadListView row="3" colSpan="2" ios:height="210" [items]="evalItems">
          <ng-template tkListItemTemplate let-item="item">
            <GridLayout rows="140, auto" class="list-item-layout">
              <Image row="0" colSpan="2" src="~/assets/images/background_1.jpg" stretch="aspectFill"></Image>
              <Image row="0" colSpan="2" [src]="item.Image" margin="20" (tap)="evalThumbTapped(item)" stretch="aspectFit"></Image>
              <Label row="1" [text]="item.Description | translate" textWrap="true"></Label>
            </GridLayout>
          </ng-template>
          <ListViewLinearLayout tkListViewLayout dynamicItemSize="false" ios:itemHeight="220" ios:itemWidth="160"
            scrollDirection="Horizontal"></ListViewLinearLayout>
        </RadListView>
      </GridLayout>

      // Demos

      <GridLayout rows="auto, auto, auto, *" columns="*, auto" class="list-grid-layout" row="4">
        <Label row="0" colSpan="2" class="hr-light m-10" backgroundColor="#FF671F" width="92.5%"></Label>
        <Label row="1" col="0" [text]="'menu.demos' | translate" class="list-heading" (tap)="chevronButtonTapped('/demos')"></Label>
        <Label row="1" col="1" horizontalAlignment="right" text="&#xf142;" class="mdi chev" (tap)="chevronButtonTapped('/demos')"></Label>
        <Label row="2" colSpan="2" [text]="'menu.demos-desc' | translate" class="list-description" textWrap="true"></Label>

        // Loading View for the delay to fetch and load demos to smooth out UI
        <StackLayout orientation="horizontal" marginLeft="10" row="3" colSpan="2" *ngIf="!demoUnitsLoaded">
          <Label [text]="'demos.loading' | translate" class="h2 text-middle" textWrap="true"></Label>
          <ActivityIndicator busy="true" marginLeft="5" width="26" height="26"></ActivityIndicator>
        </StackLayout>

        // Stock demo unit when no demo units are found
        <GridLayout rows="140, *" marginLeft="10" row="3" colSpan="2" class="list-item-layout" *ngIf="!Demos.length && demoUnitsLoaded"
          horizontalAlignment="left">
          <Image row="0" width="140" src="~/assets/images/PushTracker-SmartDrive-pairing.png" (tap)="demoThumbTapped(null)"
            backgroundImage="~/assets/images/background_1.jpg" stretch="aspectFill"></Image>
          <Label row="1" class="new-demo" color="white" [text]="'menu.new-demo' | translate" textWrap="true"></Label>
        </GridLayout>

        // Demo unit listview
        <RadListView row="3" colSpan="2" ios:height="312" [items]="Demos._array" *ngIf="Demos.length && demoUnitsLoaded">
          <ng-template tkListItemTemplate let-item="item">
            <GridLayout rows="*, *" class="list-item-layout">
              <Image row="0" *ngIf="!item.sd_image" src="~/assets/images/PushTracker-SmartDrive-pairing.png" (tap)="demoThumbTapped(item)"
                backgroundImage="~/assets/images/background_1.jpg" stretch="aspectFill"></Image>
              <Image row="0" *ngIf="item.sd_image" height="140" [src]="item.sd_image" (tap)="demoThumbTapped(item)"
                stretch="aspectFill"></Image>
              <GridLayout row="1" rows="auto, auto, auto" class="demo-item-description">
                <Label row="0" textWrap="true" [text]="(item.smartdrive_serial_number || '# ??')"></Label>
                <Label row="1" textWrap="true" [text]="item.location_string"></Label>
                <Label row="2" textWrap="true" [backgroundColor]="(item.isUpToDate(currentVersion)) ? 'green' : 'red'">
                  <FormattedString>
                    <Span [text]="item.version_string"></Span>
                    <Span class="mdi" [text]="' ' + item.version_badge(currentVersion)"></Span>
                  </FormattedString>
                </Label>
              </GridLayout>
            </GridLayout>
          </ng-template>
          <ListViewLinearLayout tkListViewLayout dynamicItemSize="true" ios:itemWidth="160" scrollDirection="Horizontal"></ListViewLinearLayout>
        </RadListView>

      </GridLayout>

      // FAQs
      <GridLayout rows="auto, auto, auto, *" columns="*, auto" class="list-grid-layout" row="5">
        <Label row="0" colSpan="2" class="hr-light m-10" backgroundColor="#FF671F" width="92.5%"></Label>
        <Label row="1" col="0" [text]="'menu.faq' | translate" class="list-heading" (tap)="chevronButtonTapped('/faq')"></Label>
        <Label row="1" col="1" horizontalAlignment="right" text="&#xf142;" class="mdi chev" (tap)="chevronButtonTapped('/faq')"></Label>
        <Label row="2" [text]="'menu.faq-desc' | translate" class="list-description" textWrap="true"></Label>

        <RadListView row="3" colSpan="2" ios:height="160" [items]="faqItems">
          <ng-template tkListItemTemplate let-item="item">
            <GridLayout rows="150" class="list-item-layout" (tap)="faqThumbTapped(item)">
              <Image row="0" colSpan="2" src="~/assets/images/background_1.jpg" stretch="aspectFill"></Image>
              <Label row="0" [text]="item.question" class="faq-question" textWrap="true"></Label>
            </GridLayout>
          </ng-template>
          <ListViewLinearLayout tkListViewLayout dynamicItemSize="false" ios:itemHeight="160" ios:itemWidth="160"
            scrollDirection="Horizontal"></ListViewLinearLayout>
        </RadListView>
      </GridLayout>

    </GridLayout>
  </ScrollView>
</StackLayout>