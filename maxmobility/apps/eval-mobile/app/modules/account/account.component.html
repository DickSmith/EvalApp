<ActionBar class="action-bar" [title]="'user.account' | translate" flat="true">
  <NavigationButton ios:visibility="collapsed" icon="res://menu" (tap)="onDrawerButtonTap()"></NavigationButton>
  <ActionItem icon="res://navigation/menu" android:visibility="collapsed" (tap)="onDrawerButtonTap()" ios.position="left">
  </ActionItem>
  <ActionItem ios.position="right" (tap)="onSaveAccountTap()">
    <Button text="Save" (tap)="onSaveAccountTap()" class="action-item"></Button>
  </ActionItem>
  <!-- <Label class="action-bar-title" text="Account"></Label> -->
</ActionBar>

<Gradient direction="to bottom" colors="#004F7E, #0070b3">
  <ScrollView>
    <StackLayout class="account-layout" orientation="vertical">
      <Image #accountImage class="account-picture" *ngIf="user.data.profile_picture" [src]="user.data.profile_picture" (tap)="onUpdateProfilePictureTap()"></Image>
      <Label color="#fff" *ngIf="!user.data.profile_picture" (tap)="onUpdateProfilePictureTap()" class="account-icon fa" text="&#xf2be;"></Label>
      <GridLayout rows="auto" columns="auto, *">
        <Label col="0" class="label" [text]="'user.language' | translate"></Label>
        <DropDown col="1" class="dropdown" [hint]="'user.language' | translate" [selectedIndex]="selectedLanguageIndex" [items]="languages"
          (selectedIndexChanged)="onLanguageChanged($event)"></DropDown>
      </GridLayout>
      <TextField [(ngModel)]="user.data.first_name" returnKeyType="next" class="account-text-entry" [hint]="'user.first-name' | translate"></TextField>
      <TextField [(ngModel)]="user.data.last_name" returnKeyType="next" class="account-text-entry" [hint]="'user.last-name' | translate"></TextField>
      <TextField [(ngModel)]="user.data.email" keyboardType="email" returnKeyType="next" class="account-text-entry" [hint]="'user.email' | translate"></TextField>
      <TextField [(ngModel)]="user.data.phone_number" keyboardType="phone" returnKeyType="done" class="account-text-entry" [hint]="'user.phone' | translate"></TextField>
      <DockLayout stretchLastChild="true" class="account-dock">
        <Label [text]="'user.consent.product-development' | translate" textWrap="true" class="consent" dock="left"></Label>
        <Switch dock="right" [(ngModel)]="user.data.consent_to_product_development"></Switch>
      </DockLayout>
      <DockLayout stretchLastChild="true" class="account-dock">
        <Label [text]="'user.consent.research' | translate" textWrap="true" class="consent" dock="left"></Label>
        <Switch dock="right" [(ngModel)]="user.data.consent_to_research"></Switch>
      </DockLayout>
      <Button class="acct-btn " [text]="'user.change-pass' | translate" (tap)="onChangePasswordTap()"></Button>
      <Button class="acct-btn" [text]="'user.reset-acct' | translate" (tap)="onResetAccountTap()"></Button>
      <Button class="acct-btn" [text]="'user.sign-out' | translate" (tap)="onSignOutTap()"></Button>
      <Button class="acct-btn" [text]="'user.provide-feedback-btn' | translate" (tap)="onFeedbackTap()"></Button>
      <!-- <Button class="acct-btn"
              text="Debug Menu"
              (tap)="onDebugMenuTap()"></Button> -->

      // hidden layout for Devon to submit 'Did You Knows' to Kinvey which triggers Push Notifications
      <StackLayout [visibility]="isAdminAccount ? 'visible' : 'collapsed'" borderColor="orange" borderRadius="4" backgroundColor="#fff"
        margin="5">
        <GridLayout rows="auto" columns="auto, *">
          <Label col="0" text="Send to All Smart Eval Users?" textWrap="true"></Label>
          <Switch col="1" [(ngModel)]="didyouknow.all_users" class="switch" horizontalAlignment="right"></Switch>
        </GridLayout>

        <TextView hint="Did you know..." [(ngModel)]="didyouknow.text" editable="true"></TextView>
        <Button text="Submit" (tap)="submitDidYouKnow()"></Button>
      </StackLayout>

    </StackLayout>
  </ScrollView>
</Gradient>